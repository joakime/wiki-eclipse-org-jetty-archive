<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" class="client-nojs" lang="en" dir="ltr"><head>
<meta charset="UTF-8"/>
<title>Jetty/Feature/WebSockets - Eclipsepedia</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"Jetty/Feature/WebSockets","wgTitle":"Jetty/Feature/WebSockets","wgCurRevisionId":334778,"wgRevisionId":334778,"wgArticleId":32856,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Jetty","Jetty Feature"],"wgBreakFrames":!1,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Jetty/Feature/WebSockets","wgRelevantArticleId":32856,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":!1,"dialogs":!1,
"preview":!1,"publish":!1},"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits"]);
} );</script>
<link rel="stylesheet" href="../../load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor&amp;only=styles&amp;skin=solstice.css"/>
<link media="screen, print" href="../../skins/solstice/public/css/styles.css%3F303.css" rel="stylesheet"/>
<meta content="" name="ResourceLoaderDynamicStyles"/>

<script src="../../load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=solstice" async=""/>
<meta name="generator" content="MediaWiki 1.26.4"/>

<link title="Eclipsepedia (en)" rel="search" href="https://wiki.eclipse.org/opensearch_desc.php" type="application/opensearchdescription+xml"/>
<link type="application/rsd+xml" href="https://wiki.eclipse.org/api.php?action=rsd" rel="EditURI"/>
<link rel="alternate" title="Eclipsepedia Atom feed" type="application/atom+xml" href="https://wiki.eclipse.org/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<style type="text/css">
/*&lt;![CDATA[*/      
#jetty-nav {
  margin-bottom: 2em;
}
#jetty-nav ul {
  padding: 3px 0 1px 1em;
  margin:0;
  border-bottom: 1px solid #aaa;
}
#jetty-nav li {
  list-style: none;
  margin: 0;
  display: inline;
}
#jetty-nav li a {
  padding: 3px 0.5em;
  margin-left: 3px;
  border: 1px solid #aaa;
  border-bottom: none;
  background: #eef;
  text-decoration: none;
}
#jetty-nav li a:link { color: #448; }
#jetty-nav li a:visited { color: #667; }
#jetty-nav li a:hover {
  color: #000;
  background: #ccf;
  border-color: #227;
}
#jetty-nav li span#current a
{
  background: #fff;
  border-bottom: 1px solid #fff;
}
#jetty-nav li .selflink {
  padding: 3px 0.5em;
  margin-left: 3px;
  border: 1px solid #aaa;
  background: #fff;
  border-bottom: 1px solid #fff;
}
table.jetty-table, .jetty-table table {
  border: 1px solid #aaa;
  border-collapse: collapse;
}
.jetty-table td {
  border: 1px solid #aaa;
  padding: 0.5em 1em;
}
.jetty-table th {
  border: 1px solid #aaa;
  background-color: #eef;
}
.jetty-table caption {
  border: 1px #aaa solid;
  margin: 1em 0 0.2em 0;
  background-color: #ccf;
  font-weight: bold;
  font-size: 1.1em;
}
#content dl  {
  border-left: 1px #aaa solid;
  border-bottom: 1px #aaa solid;
}
#content dl dt {
  float: left;
  border-top: 1px solid #aaa;
  padding: 0.5em 0 0 0.5em;
}
#content dl dd {
  border: 1px solid #aaa;
  border-bottom: none;
}
#content .narrow-list dl  {
  width: 40em;
}
#content .narrow-list dl dt {
  width: 14em;
  line-height: 1.1em;
}
#content .narrow-list dl dd {
  margin: 0 0 0 15em;
  padding: 0.5em 1em;
}
#content .wide-list dl, #content dl {
  width: 80em;
}
#content .wide-list dl dt, #content dl dt {
  padding: 0.5em 1em;
  width: 15em;
}
#content .wide-list dl dd, #content dl dd {
  padding: 1em 1em 2em 2em;
  margin: 0 0 0 17em;
}
#content .unbounded-list dl, #content .unbounded-list dl dd, #content .unbounded-list dl dt {
  border: 0 none;
  width: auto;
  padding: 0 0 0 1em;
}
#content .unbounded-list dl dt {
}
#content p  {
  margin-bottom: 0.5em;
}
#content li  {
  line-height: 1.1em;
}
.infobox {
  padding: 0.5em 1em;
  background-color: #fff;
  float: right;
  margin: 0.5em;
}
/*]]&gt;*/       
</style>
<style type="text/css">/*&lt;![CDATA[*/
.source-bash {line-height: normal;}
.source-bash li, .source-bash pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for bash
 * CSS class: source-bash, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.bash.source-bash .de1, .bash.source-bash .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.bash.source-bash  {font-family:monospace;}
.bash.source-bash .imp {font-weight: bold; color: red;}
.bash.source-bash li, .bash.source-bash .li1 {font-weight: normal; vertical-align:top;}
.bash.source-bash .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.bash.source-bash .li2 {font-weight: bold; vertical-align:top;}
.bash.source-bash .kw1 {color: #000000; font-weight: bold;}
.bash.source-bash .kw2 {color: #c20cb9; font-weight: bold;}
.bash.source-bash .kw3 {color: #7a0874; font-weight: bold;}
.bash.source-bash .co0 {color: #666666; font-style: italic;}
.bash.source-bash .co1 {color: #800000;}
.bash.source-bash .co2 {color: #cc0000; font-style: italic;}
.bash.source-bash .co3 {color: #000000; font-weight: bold;}
.bash.source-bash .co4 {color: #666666;}
.bash.source-bash .es1 {color: #000099; font-weight: bold;}
.bash.source-bash .es2 {color: #007800;}
.bash.source-bash .es3 {color: #007800;}
.bash.source-bash .es4 {color: #007800;}
.bash.source-bash .es5 {color: #780078;}
.bash.source-bash .es_h {color: #000099; font-weight: bold;}
.bash.source-bash .br0 {color: #7a0874; font-weight: bold;}
.bash.source-bash .sy0 {color: #000000; font-weight: bold;}
.bash.source-bash .st0 {color: #ff0000;}
.bash.source-bash .st_h {color: #ff0000;}
.bash.source-bash .nu0 {color: #000000;}
.bash.source-bash .re0 {color: #007800;}
.bash.source-bash .re1 {color: #007800;}
.bash.source-bash .re2 {color: #007800;}
.bash.source-bash .re4 {color: #007800;}
.bash.source-bash .re5 {color: #660033;}
.bash.source-bash .ln-xtra, .bash.source-bash li.ln-xtra, .bash.source-bash div.ln-xtra {background-color: #ffc;}
.bash.source-bash span.xtra { display:block; }

/*]]&gt;*/
</style>
<style type="text/css">/*&lt;![CDATA[*/
.source-java {line-height: normal;}
.source-java li, .source-java pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for java
 * CSS class: source-java, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.java.source-java .de1, .java.source-java .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.java.source-java  {font-family:monospace;}
.java.source-java .imp {font-weight: bold; color: red;}
.java.source-java li, .java.source-java .li1 {font-weight: normal; vertical-align:top;}
.java.source-java .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.java.source-java .li2 {font-weight: bold; vertical-align:top;}
.java.source-java .kw1 {color: #7F0055; font-weight: bold;}
.java.source-java .kw2 {color: #7F0055; font-weight: bold;}
.java.source-java .kw3 {color: #000000; font-weight: normal}
.java.source-java .kw4 {color: #7F0055; font-weight: bold;}
.java.source-java .co1 {color: #3F7F5F; font-style: italic;}
.java.source-java .co2 {color: #3F7F5F;}
.java.source-java .co3 {color: #3F7F5F; font-style: italic; font-weight: bold;}
.java.source-java .coMULTI {color: #3F5FBF; font-style: italic;}
.java.source-java .es0 {color: #000000;}
.java.source-java .br0 {color: #000000;}
.java.source-java .sy0 {color: #000000;}
.java.source-java .st0 {color: #2A00ff;}
.java.source-java .nu0 {color: #000000;}
.java.source-java .me1 {color: #000000;}
.java.source-java .me2 {color: #000000;}
.java.source-java .ln-xtra, .java.source-java li.ln-xtra, .java.source-java div.ln-xtra {background-color: #ffc;}
.java.source-java span.xtra { display:block; }

/*]]&gt;*/
</style>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Jetty_Feature_WebSockets skin-solstice action-view" id="solstice">

<a href="WebSockets.html#content" class="sr-only">Skip to main content</a>
<header class="header-wrapper" id="header-wrapper">
  <div class="clearfix toolbar-container-wrapper">
    <div class="container-fluid">
      <div class="text-right toolbar-row row hidden-print">
        <div class="col-md-24 row-toolbar-col">
               <ul class="list-inline">
                  <li id="pt-login">
            <a href="https://wiki.eclipse.org/index.php?title=Special:UserLogin&amp;returnto=Jetty%2FFeature%2FWebSockets" class="toolbar-link toolbar-login">
              <i class="fa fa-sign-in fa-fw"/> Log in            </a>
          </li>
                <li><a class="toolbar-link toolbar-manage-cookies dropdown-toggle"><i class="fa fa-wrench"/> Manage Cookies</a></li>
      </ul>
            </div>
      </div>
    </div>
  </div>
  <div class="container-fluid">
    <div id="header-row" class="row">
      <div class="col-sm-5 col-md-4" id="header-left">
        <div class="wrapper-logo-default"><a href="https://www.eclipse.org/"><img class="logo-eclipse-default hidden-xs" width="160" src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-foundation-white-orange.svg" alt="Eclipse.org logo"/></a></div>
      </div>
      <div id="main-menu-wrapper" class="col-sm-19 col-md-20 margin-top-10">
        <div id="btn-call-for-action" class="float-right hidden-xs"><a class="btn btn-huge btn-warning" href="https://eclipse.org/downloads/"><i class="fa fa-download"/> Download</a></div>
        <div class="navbar yamm float-sm-right" id="main-menu">
          <div id="navbar-main-menu" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li><a href="https://www.eclipse.org/projects/" target="_self">Projects</a></li>
              <li><a target="_self" href="https://www.eclipse.org/org/workinggroups/">Working Groups</a></li>
              <li><a target="_self" href="https://www.eclipse.org/membership/">Members</a></li>
              <li class="dropdown visible-xs">
                <a class="dropdown-toggle" data-toggle="dropdown" href="WebSockets.html#">Community <b class="caret"/></a>
                <ul class="dropdown-menu">
                  <li><a href="http://marketplace.eclipse.org">Marketplace</a></li>
                  <li><a href="http://events.eclipse.org">Events</a></li>
                  <li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li>
                  <li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li>
                  <li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li>
                  <li><a href="https://blogs.eclipse.org">Blogs</a></li>
                </ul>
              </li>
              <li class="dropdown visible-xs">
                <a class="dropdown-toggle" href="WebSockets.html#" data-toggle="dropdown">Participate <b class="caret"/></a>
                <ul class="dropdown-menu">
                  <li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li>
                  <li><a href="https://www.eclipse.org/forums/">Forums</a></li>
                  <li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li>
                  <li><a href="https://wiki.eclipse.org/">Wiki</a></li>
                  <li><a href="https://wiki.eclipse.org/IRC">IRC</a></li>
                  <li><a href="https://www.eclipse.org/org/research/">Research</a></li>
                </ul>
              </li>
              <li class="dropdown visible-xs">
                <a data-toggle="dropdown" href="WebSockets.html#" class="dropdown-toggle">Eclipse IDE <b class="caret"/></a>
                <ul class="dropdown-menu">
                  <li><a href="https://www.eclipse.org/downloads">Download</a></li>
                  <li><a href="https://www.eclipse.org/eclipseide">Learn More</a></li>
                  <li><a href="https://help.eclipse.org">Documentation</a></li>
                  <li><a href="https://www.eclipse.org/getting_started">Getting Started / Support</a></li>
                  <li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li>
                  <li><a href="https://www.eclipse.org/ide/">IDE and Tools</a></li>
                  <li><a href="https://www.eclipse.org/forums/index.php/f/89/">Newcomer Forum</a></li>
                </ul>
              </li>
              <!-- More -->
              <li class="dropdown eclipse-more hidden-xs">
                <a role="button" class="dropdown-toggle" data-toggle="dropdown">More<b class="caret"/></a>
                <ul class="dropdown-menu">
                  <li>
                    <!-- Content container to add padding -->
                    <div class="yamm-content">
                      <div class="row">
                        <ul class="col-sm-8 list-unstyled">
                          <li>
                            <p><strong>Community</strong></p>
                          </li>
                          <li><a href="http://marketplace.eclipse.org">Marketplace</a></li>
                          <li><a href="http://events.eclipse.org">Events</a></li>
                          <li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li>
                          <li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li>
                          <li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li>
                          <li><a href="https://blogs.eclipse.org">Blogs</a></li>
                        </ul>
                        <ul class="col-sm-8 list-unstyled">
                          <li>
                            <p><strong>Participate</strong></p>
                          </li>
                          <li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li>
                          <li><a href="https://www.eclipse.org/forums/">Forums</a></li>
                          <li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li>
                          <li><a href="https://wiki.eclipse.org/">Wiki</a></li>
                          <li><a href="https://wiki.eclipse.org/IRC">IRC</a></li>
                          <li><a href="https://www.eclipse.org/org/research/">Research</a></li>
                        </ul>
                        <ul class="col-sm-8 list-unstyled">
                          <li>
                            <p><strong>Eclipse IDE</strong></p>
                          </li>
                          <li><a href="https://www.eclipse.org/downloads">Download</a></li>
                          <li><a href="https://www.eclipse.org/eclipseide">Learn More</a></li>
                          <li><a href="https://help.eclipse.org">Documentation</a></li>
                          <li><a href="https://www.eclipse.org/getting_started">Getting Started / Support</a></li>
                          <li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li>
                          <li><a href="https://www.eclipse.org/ide/">IDE and Tools</a></li>
                          <li><a href="https://www.eclipse.org/forums/index.php/f/89/">Newcomer Forum</a></li>
                        </ul>
                      </div>
                    </div>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
          <div class="navbar-header">
            <button data-target="#navbar-main-menu" class="navbar-toggle" type="button" data-toggle="collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"/>
            <span class="icon-bar"/>
            <span class="icon-bar"/>
            <span class="icon-bar"/>
            </button>
            <div class="wrapper-logo-mobile"><a href="https://www.eclipse.org/" class="navbar-brand visible-xs"><img class="logo-eclipse-default-mobile img-responsive" width="160" alt="Eclipse.org logo" src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-foundation-white-orange.svg"/></a></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
<section class="default-breadcrumbs hidden-print" id="breadcrumb">
  <div class="container-fluid">
    <h3 class="sr-only">Breadcrumbs</h3>
    <div class="row">
      <div class="col-sm-24">
        <ol class="breadcrumb">
          <li><a href="https://www.eclipse.org/">Home</a></li>
          <li><a href="https://wiki.eclipse.org/Main_Page">Eclipse Wiki</a></li>
          <li class="active">Jetty/Feature/WebSockets</li>
        </ol>
      </div>
    </div>
  </div>
</section>
<!-- /#breadcrumb -->
<main>
<div class="container-fluid padding-15 padding-top-20">
    
    
    <!-- content -->
    <section class="mw-body container-full clearfix 0" id="content">
      <div id="mw-js-message" style="display:none;"/>

      
      <!-- bodyContent -->
      <div id="bodyContent">

        
                <!-- jumpto -->
        <div class="mw-jump" id="jump-to-nav">
          Jump to: <a href="WebSockets.html#mw-head">navigation</a>,
          <a href="WebSockets.html#p-search">search</a>
        </div>
        <!-- /jumpto -->
        
          <!-- leftcol -->
          <aside class="col-md-4 noprint hidden-print" id="leftcol">
                      <form class="input-group" action="https://wiki.eclipse.org/index.php" role="form" id="form-eclipse-search">
              <input value="" class="search-query form-control" title="Special:Search" type="search" placeholder="Search" accesskey="f" name="search" id="searchInput"/>

              <span class="input-group-btn">
                <button type="submit" title="Search the pages for this text" value="search" class="btn btn-default" name="fulltext" id="mw-searchButton">
                  <i class="fa fa-search"/>
                </button>
              </span>
            </form>
                      <select onchange="this.options[this.selectedIndex].value &amp;&amp; (window.location = this.options[this.selectedIndex].value);" class="form-control margin-top-10 margin-bottom-10 visible-xs visible-sm"><option class="fw-700 ">---Navigation---</option><option value="/Main_Page">Main Page</option><option value="/Eclipsepedia:Community_portal">Community portal</option><option value="/Eclipsepedia:Current_events">Current events</option><option value="/Special:RecentChanges">Recent changes</option><option value="/Special:Random">Random page</option><option value="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents">Help</option></select><ul class="ul-left-nav fa-ul hidden-print leftnav hidden-xs hidden-sm"><li class="separator"><span class="separator">Navigation</span></li>                <li class=""><i class="fa fa-angle-double-right orange fa-fw"/> <a href="https://wiki.eclipse.org/Main_Page" id="n-mainpage" accesskey="z" title="Visit the main page [z]">Main Page</a></li>                <li class=""><i class="fa fa-angle-double-right orange fa-fw"/> <a href="https://wiki.eclipse.org/Eclipsepedia:Community_portal" id="n-portal" title="About the project, what you can do, where to find things">Community portal</a></li>                <li class=""><i class="fa fa-angle-double-right orange fa-fw"/> <a title="Find background information on current events" id="n-currentevents" href="https://wiki.eclipse.org/Eclipsepedia:Current_events">Current events</a></li>                <li class=""><i class="fa fa-angle-double-right orange fa-fw"/> <a href="https://wiki.eclipse.org/Special:RecentChanges" id="n-recentchanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>                <li class=""><i class="fa fa-angle-double-right orange fa-fw"/> <a href="https://wiki.eclipse.org/Special:Random" id="n-randompage" title="Load a random page [x]" accesskey="x">Random page</a></li>                <li class=""><i class="fa fa-angle-double-right orange fa-fw"/> <a title="The place to find out" id="n-help" href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents">Help</a></li></ul>            <select onchange="this.options[this.selectedIndex].value &amp;&amp; (window.location = this.options[this.selectedIndex].value);" class="form-control margin-top-10 margin-bottom-10 visible-xs visible-sm"><option class="fw-700 ">---Toolbox---</option><option value="/index.php?title=Jetty/Feature/WebSockets&amp;action=info">Page information</option><option value="/index.php?title=Jetty/Feature/WebSockets&amp;oldid=334778">Permanent link</option><option value="/index.php?title=Jetty/Feature/WebSockets&amp;printable=yes">Printable version</option><option value="/Special:SpecialPages">Special pages</option><option value="/Special:RecentChangesLinked/Jetty/Feature/WebSockets">Related changes</option><option value="/Special:WhatLinksHere/Jetty/Feature/WebSockets">What links here</option></select><ul class="ul-left-nav fa-ul hidden-print leftnav hidden-xs hidden-sm"><li class="separator"><span class="separator">Toolbox</span></li><li><i class="fa fa-angle-double-right orange fa-fw"/> <a href="https://wiki.eclipse.org/index.php?title=Jetty/Feature/WebSockets&amp;action=info" id="t-info" title="More information about this page">Page information</a></li><li><i class="fa fa-angle-double-right orange fa-fw"/> <a title="Permanent link to this revision of the page" href="https://wiki.eclipse.org/index.php?title=Jetty/Feature/WebSockets&amp;oldid=334778" id="t-permalink">Permanent link</a></li><li><i class="fa fa-angle-double-right orange fa-fw"/> <a rel="alternate" accesskey="p" title="Printable version of this page [p]" id="t-print" href="https://wiki.eclipse.org/index.php?title=Jetty/Feature/WebSockets&amp;printable=yes">Printable version</a></li><li><i class="fa fa-angle-double-right orange fa-fw"/> <a accesskey="q" title="A list of all special pages [q]" id="t-specialpages" href="https://wiki.eclipse.org/Special:SpecialPages">Special pages</a></li><li><i class="fa fa-angle-double-right orange fa-fw"/> <a id="t-recentchangeslinked" href="https://wiki.eclipse.org/Special:RecentChangesLinked/Jetty/Feature/WebSockets" accesskey="k" title="Recent changes in pages linked from this page [k]">Related changes</a></li><li><i class="fa fa-angle-double-right orange fa-fw"/> <a accesskey="j" title="A list of all wiki pages that link here [j]" href="https://wiki.eclipse.org/Special:WhatLinksHere/Jetty/Feature/WebSockets" id="t-whatlinkshere">What links here</a></li></ul>                                  </aside>
          <!-- /leftcol -->

          <!-- mainContent -->
          <div class="col-md-20" id="mainContent">
                      <ul role="tablist" class="nav nav-tabs noprint hidden-print">
                       <li id="ca-nstab-main" class="active"><a tabindex="-1" href="WebSockets.html" title="View the content page [c]" accesskey="c">Page</a></li>
                        <li id="ca-talk"><a tabindex="-1" href="https://wiki.eclipse.org/Talk:Jetty/Feature/WebSockets" accesskey="t" title="Discussion about the content page [t]">Discussion</a></li>
                        <li id="ca-viewsource"><a href="https://wiki.eclipse.org/index.php?title=Jetty/Feature/WebSockets&amp;action=edit" accesskey="e" title="This page is protected.&#10;You can view its source [e]" tabindex="-1">View source</a></li>
                        <li class="collapsible" id="ca-history"><a href="https://wiki.eclipse.org/index.php?title=Jetty/Feature/WebSockets&amp;action=history" title="Past revisions of this page [h]" accesskey="h" tabindex="-1">History</a></li>
                      </ul>            <div class="tab-content background-white">
              <div id="tab-pane-main-page-content" class="tab-pane active">

                
                <h1 id="firstHeading" class="firstHeading page-header">
                  <span dir="auto">Jetty/Feature/WebSockets</span>
                </h1>
                <div id="main-page-content">
                                                      <!-- subtitle -->
                  <div class="alert alert-small alert-warning" id="contentSub"><span class="subpages">&lt; <a title="Jetty" href="../../Jetty.html">Jetty</a>‎ | <a href="../Feature.html" title="Jetty/Feature">Feature</a></span></div>
                  <!-- /subtitle -->
                  
                  
                  <div lang="en" class="mw-content-ltr" dir="ltr" id="mw-content-text"><p><br/>
</p><p><br/>
</p>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="WebSockets.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1"><a href="WebSockets.html#You_don.E2.80.99t_want_to_do_this.21"><span class="tocnumber">2</span> <span class="toctext">You don’t want to do this!</span></a></li>
<li class="toclevel-1"><a href="WebSockets.html#Feature"><span class="tocnumber">3</span> <span class="toctext">Feature</span></a></li>
<li class="toclevel-1"><a href="WebSockets.html#Test_Client_and_Server"><span class="tocnumber">4</span> <span class="toctext">Test Client and Server</span></a></li>
<li class="toclevel-1"><a href="WebSockets.html#Using_a_Browser"><span class="tocnumber">5</span> <span class="toctext">Using a Browser</span></a></li>
<li class="toclevel-1"><a href="WebSockets.html#Understanding_How_the_Client_Works"><span class="tocnumber">6</span> <span class="toctext">Understanding How the Client Works</span></a></li>
<li class="toclevel-1"><a href="WebSockets.html#Understanding_How_the_Server_Works"><span class="tocnumber">7</span> <span class="toctext">Understanding How the Server Works</span></a></li>
<li class="toclevel-1"><a href="WebSockets.html#Don.E2.80.99t_do_it_this_way.21"><span class="tocnumber">8</span> <span class="toctext">Don’t do it this way!</span></a></li>
<li class="toclevel-1"><a href="WebSockets.html#Additional_Resources"><span class="tocnumber">9</span> <span class="toctext">Additional Resources</span></a></li>
</ul>
</div>

<h2><span id="Introduction" class="mw-headline">Introduction</span></h2>
<div class="messagebox" style="background-color: #f9f6b7; border: 1px solid #c4c295; color: black; padding: 5px; margin: 1ex 0; min-height: 35px; padding-left: 45px;">
<div style="float: left; margin-left: -40px;"><a href="https://wiki.eclipse.org/File:Warning2.png" class="image"><img src="../../images/3/37/Warning2.png" alt="Warning2.png" height="35" width="35"/></a></div>
<div>Some or all of this content remains to be ported to Jetty 9 <a href="http://www.eclipse.org/jetty/documentation/current" rel="nofollow" class="external text">Documentation</a>.<br/>If you are interested in migrating this content see our <a href="http://www.eclipse.org/jetty/documentation/current/contributing-documentation.html" rel="nofollow" class="external text">contribution guide</a> or <a class="external text" rel="nofollow" href="http://www.eclipse.org/jetty/documentation/current/community.html">contact us</a>.</div>
</div>
<p><br/>
The <a class="external text" href="http://en.wikipedia.org/wiki/WebSockets" rel="nofollow">WebSockets</a> protocol and API is an emerging standard that seeks to provide high-quality, bidirectional communication between a browser (or other web client) and a server. The goal is to eventually replace Comet techniques like long polling. Jetty has supported the various WebSocket drafts in the 7.x and 8.x releases.  
</p>
<h2><span id="You_don.E2.80.99t_want_to_do_this.21" class="mw-headline">You don’t want to do this!</span></h2>
<p>This document shows you how to use WebSockets from the levels closest to the machine; it targets framework developers who want to use WebSockets, and application developers who can't stand not knowing what is under the hood. However, application programmers should not follow these examples to build an application. WebSockets is not a silver bullet, and on its own will never be simple to use for nontrivial applications (see <a href="http://webtide.intalio.com/2011/04/is-websocket-chat-simpler/" rel="nofollow" class="external text">Is WebSocket Chat Simpler?</a>). We recommend that you look toward frameworks like <a class="external text" href="http://cometd.org" rel="nofollow">Cometd</a>, that private a higher level of abstraction, hide the technicalities, and allow you to use either Comet long polling or WebSockets transparently.
</p>
<h2><span id="Feature" class="mw-headline">Feature</span></h2>
<h2><span class="mw-headline" id="Test_Client_and_Server">Test Client and Server</span></h2>
<p>The simplest way to get started is to download 3 jars: The Jetty aggregate Jar contains all of jetty; the jetty-websocket test jar that contains a client and server; and the servlet jar. You can do this using a browser or with the following command line wgets:
</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr"><div class="bash source-bash"><pre class="de1"><span class="kw2">wget</span> <span class="re5">-O</span> jetty-all.jar <span class="re5">--user-agent</span>=demo \
  http:<span class="sy0">//</span>repo2.maven.org<span class="sy0">/</span>maven2<span class="sy0">/</span>org<span class="sy0">/</span>eclipse<span class="sy0">/</span>jetty<span class="sy0">/</span>aggregate<span class="sy0">/</span>jetty-all<span class="sy0">/</span>7.6.2.v20120308<span class="sy0">/</span>jetty-all-7.6.2.v20120308.jar
<span class="kw2">wget</span> <span class="re5">-O</span> jetty-websocket-tests.jar <span class="re5">--user-agent</span>=demo \
  http:<span class="sy0">//</span>repo2.maven.org<span class="sy0">/</span>maven2<span class="sy0">/</span>org<span class="sy0">/</span>eclipse<span class="sy0">/</span>jetty<span class="sy0">/</span>jetty-websocket<span class="sy0">/</span>7.6.2.v20120308<span class="sy0">/</span>jetty-websocket-7.6.2.v20120308-tests.jar
<span class="kw2">wget</span> <span class="re5">--user-agent</span>=demo \
    http:<span class="sy0">//</span>repo2.maven.org<span class="sy0">/</span>maven2<span class="sy0">/</span>javax<span class="sy0">/</span>servlet<span class="sy0">/</span>servlet-api<span class="sy0">/</span><span class="nu0">2.5</span><span class="sy0">/</span>servlet-api-<span class="nu0">2.5</span>.jar</pre></div></div>
<p>To run a simple test server (use <tt>–help</tt> to see more options):
</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr"><div class="java source-java"><pre class="de1"> java <span class="sy0">-</span>cp jetty<span class="sy0">-</span>websocket<span class="sy0">-</span>tests.<span class="me1">jar</span><span class="sy0">:</span>jetty<span class="sy0">-</span>all.<span class="me1">jar</span><span class="sy0">:</span>servlet<span class="sy0">-</span>api<span class="sy0">-</span><span class="nu0">2.5</span>.<span class="me1">jar</span> \
   org.<span class="me1">eclipse</span>.<span class="me1">jetty</span>.<span class="me1">websocket</span>.<span class="me1">TestServer</span> \
   <span class="sy0">--</span>port <span class="nu0">8080</span> \
   <span class="sy0">--</span>docroot . \
   <span class="sy0">--</span>verbose</pre></div></div>
<div class="messagebox" style="background-color: #def3fe; border: 1px solid #c5d7e0; color: black; padding: 5px; margin: 1ex 0; min-height: 35px; padding-left: 45px;">
<div style="float: left; margin-left: -40px;"><a class="image" href="https://wiki.eclipse.org/File:Note.png"><img height="35" width="35" src="../../images/c/cc/Note.png" alt="Note.png"/></a></div>
<div>
<p><b>Windows Users Take Note:</b>  
</p><p>The above example command line is for Unix/Linux/OSX, change the above example's use of "<tt>:</tt>" to "<tt>;</tt>" for the command to work in Windows.
</p>
<b><br/></b></div>
</div>
<p><br/>
You can test the server with the test client (use <tt>–help</tt> to see more options):
</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr"><div class="java source-java"><pre class="de1"> java <span class="sy0">-</span>cp jetty<span class="sy0">-</span>websocket<span class="sy0">-</span>tests.<span class="me1">jar</span><span class="sy0">:</span>jetty<span class="sy0">-</span>all.<span class="me1">jar</span><span class="sy0">:</span>servlet<span class="sy0">-</span>api<span class="sy0">-</span><span class="nu0">2.5</span>.<span class="me1">jar</span> \
   org.<span class="me1">eclipse</span>.<span class="me1">jetty</span>.<span class="me1">websocket</span>.<span class="me1">TestClient</span> \
   <span class="sy0">--</span>port <span class="nu0">8080</span> \
   <span class="sy0">--</span>protocol echo</pre></div></div>
<div class="messagebox" style="background-color: #def3fe; border: 1px solid #c5d7e0; color: black; padding: 5px; margin: 1ex 0; min-height: 35px; padding-left: 45px;">
<div style="float: left; margin-left: -40px;"><a href="https://wiki.eclipse.org/File:Note.png" class="image"><img height="35" width="35" src="../../images/c/cc/Note.png" alt="Note.png"/></a></div>
<div>
<p><b>Windows Users Take Note:</b>  
</p><p>The above example command line is for Unix/Linux/OSX, change the above example's use of "<tt>:</tt>" to "<tt>;</tt>" for the command to work in Windows.
</p>
<b><br/></b></div>
</div>
<p><br/>
The output from the test client is similar to ping. You can use the options you discover by using <tt>–help</tt> to try out different types of tests, including fragmentation and aggregation of WebSocket frames.
</p>
<h2><span class="mw-headline" id="Using_a_Browser">Using a Browser</span></h2>
<p>Using a Java client is not compelling unless you want to write a desktop application that uses WebSocket (a viable idea).  But most WebSocket users want to use the browser as a client.  So point your browser at the TestServer at <a href="http://localhost:8080" rel="nofollow" class="external free">http://localhost:8080</a>.
</p><p>The WebSocket TestServer also runs an HTTP file server at the directory given by <tt>–docroot</tt>, so in this case you should see in the browser a listing of the directory in which you ran the test server.
</p><p>To turn the browser into a WebSocket client, you need to serve some HTML and Javascript that executes in the browser and talks back to the server using Websockets.  
</p>
<ol><li> Create the file <tt>index.html</tt> in the same directory you ran the server from. </li>
<li> Put into it the following contents which you can download from <a class="external text" rel="nofollow" href="http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/plain/jetty-websocket/src/test/webapp/index.html">jetty-websocket/src/test/webapp/index.html</a>. This index file contains the HTML, CSS and Javascript for a basic chat room.</li></ol>
<p>You should now be able to point your browser(s) at the test server, see a chat room, and join it.  If your browser does not support WebSockets, you’ll receive a warning.
</p>
<h2><span class="mw-headline" id="Understanding_How_the_Client_Works">Understanding How the Client Works</span></h2>
<p>The initial HTML view has a prompt for a user name.  When a you enter a name, the system calls the <tt>join</tt> method, which creates the WebSocket to the server.  The URI for the WebSocket derives from the document's location. Call back functions are registered for open, message and close events.  The <tt>org.ietf.websocket.test-echo-broadcast</tt> subprotocol is specified as this echoes all received messages to all other broadcast connections, providing the semantic a chat room requires:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">join<span class="sy0">:</span> function<span class="br0">(</span>name<span class="br0">)</span> <span class="br0">{</span>
  <span class="kw1">this</span>._username<span class="sy0">=</span>name<span class="sy0">;</span>
  var location <span class="sy0">=</span> document.<span class="me1">location</span>.<span class="me1">toString</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">replace</span><span class="br0">(</span><span class="st0">'http://'</span>,<span class="st0">'ws://'</span><span class="br0">)</span>.<span class="me1">replace</span><span class="br0">(</span><span class="st0">'https://'</span>,<span class="st0">'wss://'</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw1">this</span>._ws<span class="sy0">=</span><span class="kw1">new</span> WebSocket<span class="br0">(</span>location,<span class="st0">"org.ietf.websocket.test-echo-broadcast"</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw1">this</span>._ws.<span class="me1">onopen</span><span class="sy0">=</span><span class="kw1">this</span>._onopen<span class="sy0">;</span>
  <span class="kw1">this</span>._ws.<span class="me1">onmessage</span><span class="sy0">=</span><span class="kw1">this</span>._onmessage<span class="sy0">;</span>
  <span class="kw1">this</span>._ws.<span class="me1">onclose</span><span class="sy0">=</span><span class="kw1">this</span>._onclose<span class="sy0">;</span>
<span class="br0">}</span>,</pre></div></div>
<p>When the WebSocket successfully connects to the server, it calls the <tt>onopen</tt> callback, which changes the appearance of the chat room to prompt for a chat message.  It also sends a message saying the user has joined the room:
</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr"><div class="java source-java"><pre class="de1">_onopen<span class="sy0">:</span> function<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
  $<span class="br0">(</span><span class="st0">'join'</span><span class="br0">)</span>.<span class="me1">className</span><span class="sy0">=</span><span class="st0">'hidden'</span><span class="sy0">;</span>
  $<span class="br0">(</span><span class="st0">'joined'</span><span class="br0">)</span>.<span class="me1">className</span><span class="sy0">=</span><span class="st0">''</span><span class="sy0">;</span>
  $<span class="br0">(</span><span class="st0">'phrase'</span><span class="br0">)</span>.<span class="me1">focus</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
  room._send<span class="br0">(</span>room._username,<span class="st0">'has joined!'</span><span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span>,</pre></div></div>
<p>To send a message, you format a string as <i>username:chat text</i> and then call the WebSocket <tt>send</tt> method:
</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr"><div class="java source-java"><pre class="de1">_send<span class="sy0">:</span> function<span class="br0">(</span>user,message<span class="br0">)</span><span class="br0">{</span>
  user<span class="sy0">=</span>user.<span class="me1">replace</span><span class="br0">(</span><span class="st0">':'</span>,<span class="st0">'_'</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw1">if</span> <span class="br0">(</span><span class="kw1">this</span>._ws<span class="br0">)</span>
    <span class="kw1">this</span>._ws.<span class="me1">send</span><span class="br0">(</span>user<span class="sy0">+</span><span class="st0">':'</span><span class="sy0">+</span>message<span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span>,
 
chat<span class="sy0">:</span> function<span class="br0">(</span>text<span class="br0">)</span> <span class="br0">{</span>
  <span class="kw1">if</span> <span class="br0">(</span>text <span class="sy0">!=</span> <span class="kw2">null</span> <span class="sy0">&amp;</span>amp<span class="sy0">;&amp;</span>amp<span class="sy0">;</span> text.<span class="me1">length</span><span class="sy0">&amp;</span>gt<span class="sy0">;</span><span class="nu0">0</span> <span class="br0">)</span>
     room._send<span class="br0">(</span>room._username,text<span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span>,</pre></div></div>
<p>When the browser receives a WebSocket message over the connection, the system calls the <tt>onmessage</tt> callback with a message object. The Jetty implementation looks for  the username and colon, strips out any markup, and then appends the message to the chat room:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">_onmessage<span class="sy0">:</span> function<span class="br0">(</span>m<span class="br0">)</span> <span class="br0">{</span>
  <span class="kw1">if</span> <span class="br0">(</span>m.<span class="me1">data</span><span class="br0">)</span><span class="br0">{</span>
    var c<span class="sy0">=</span>m.<span class="me1">data</span>.<span class="me1">indexOf</span><span class="br0">(</span><span class="st0">':'</span><span class="br0">)</span><span class="sy0">;</span>
    var from<span class="sy0">=</span>m.<span class="me1">data</span>.<span class="me1">substring</span><span class="br0">(</span><span class="nu0">0</span>,c<span class="br0">)</span>.<span class="me1">replace</span><span class="br0">(</span><span class="st0">'&amp;lt;'</span>,<span class="st0">'&amp;lt;'</span><span class="br0">)</span>.<span class="me1">replace</span><span class="br0">(</span><span class="st0">'&amp;gt;'</span>,<span class="st0">'&amp;gt;'</span><span class="br0">)</span><span class="sy0">;</span>
    var text<span class="sy0">=</span>m.<span class="me1">data</span>.<span class="me1">substring</span><span class="br0">(</span>c<span class="sy0">+</span><span class="nu0">1</span><span class="br0">)</span>.<span class="me1">replace</span><span class="br0">(</span><span class="st0">'&amp;lt;'</span>,<span class="st0">'&amp;lt;'</span><span class="br0">)</span>.<span class="me1">replace</span><span class="br0">(</span><span class="st0">'&amp;gt;'</span>,<span class="st0">'&amp;gt;'</span><span class="br0">)</span><span class="sy0">;</span>
    var chat<span class="sy0">=</span>$<span class="br0">(</span><span class="st0">'chat'</span><span class="br0">)</span><span class="sy0">;</span>
    var spanFrom <span class="sy0">=</span> document.<span class="me1">createElement</span><span class="br0">(</span><span class="st0">'span'</span><span class="br0">)</span><span class="sy0">;</span>
    spanFrom.<span class="me1">className</span><span class="sy0">=</span><span class="st0">'from'</span><span class="sy0">;</span>
    spanFrom.<span class="me1">innerHTML</span><span class="sy0">=</span>from<span class="sy0">+</span><span class="st0">': '</span><span class="sy0">;</span>
    var spanText <span class="sy0">=</span> document.<span class="me1">createElement</span><span class="br0">(</span><span class="st0">'span'</span><span class="br0">)</span><span class="sy0">;</span>
    spanText.<span class="me1">className</span><span class="sy0">=</span><span class="st0">'text'</span><span class="sy0">;</span>
    spanText.<span class="me1">innerHTML</span><span class="sy0">=</span>text<span class="sy0">;</span>
    var lineBreak <span class="sy0">=</span> document.<span class="me1">createElement</span><span class="br0">(</span><span class="st0">'br'</span><span class="br0">)</span><span class="sy0">;</span>
    chat.<span class="me1">appendChild</span><span class="br0">(</span>spanFrom<span class="br0">)</span><span class="sy0">;</span>
    chat.<span class="me1">appendChild</span><span class="br0">(</span>spanText<span class="br0">)</span><span class="sy0">;</span>
    chat.<span class="me1">appendChild</span><span class="br0">(</span>lineBreak<span class="br0">)</span><span class="sy0">;</span>
    chat.<span class="me1">scrollTop</span> <span class="sy0">=</span> chat.<span class="me1">scrollHeight</span> <span class="sy0">-</span> chat.<span class="me1">clientHeight</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span>,</pre></div></div>
<p>If the server closes the connection, or if the browser times it out, then the <tt>onclose</tt> callback is called.  This nulls out the chat room and reverts to the starting position:
</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr"><div class="java source-java"><pre class="de1"> onclose<span class="sy0">:</span> function<span class="br0">(</span>m<span class="br0">)</span> <span class="br0">{</span>
  <span class="kw1">this</span>._ws<span class="sy0">=</span><span class="kw2">null</span><span class="sy0">;</span>
  $<span class="br0">(</span><span class="st0">'join'</span><span class="br0">)</span>.<span class="me1">className</span><span class="sy0">=</span><span class="st0">''</span><span class="sy0">;</span>
  $<span class="br0">(</span><span class="st0">'joined'</span><span class="br0">)</span>.<span class="me1">className</span><span class="sy0">=</span><span class="st0">'hidden'</span><span class="sy0">;</span>
  $<span class="br0">(</span><span class="st0">'username'</span><span class="br0">)</span>.<span class="me1">focus</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
  $<span class="br0">(</span><span class="st0">'chat'</span><span class="br0">)</span>.<span class="me1">innerHTML</span><span class="sy0">=</span><span class="st0">''</span><span class="sy0">;</span>
<span class="br0">}</span></pre></div></div>
<h2><span id="Understanding_How_the_Server_Works" class="mw-headline">Understanding How the Server Works</span></h2>
<p>The <a href="http://dev.eclipse.org/svnroot/rt/org.eclipse.jetty/jetty/tags/jetty-7.4.0.v20110414/jetty-websocket/src/main/java/org/eclipse/jetty/websocket/TestServer.java" rel="nofollow" class="external text">server side code</a> for  this chat room uses an embedded Jetty server and is written against the Jetty WebSocket APIs that are not part of the WebSocket standard. There is not yet even a proposed standard for serverside WebSocket APIs, but it is a topic for consideration with the servlet 3.1 JSR.
</p><p>The test server is an extension of an <a rel="nofollow" href="http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty" class="external text">embedded Jetty server</a>, and the constructor adds a <a class="external text" rel="nofollow" href="http://download.eclipse.org/jetty/7.4.0.v20110414/xref/org/eclipse/jetty/server/nio/SelectChannelConnector.html">connector</a> at the required port, creates a <a class="external text" rel="nofollow" href="http://download.eclipse.org/jetty/7.4.0.v20110414/xref/org/eclipse/jetty/websocket/WebSocketHandler.html">WebSocketHandler</a> and a <a href="http://download.eclipse.org/jetty/7.4.0.v20110414/xref/org/eclipse/jetty/server/handler/ResourceHandler.html" rel="nofollow" class="external text">ResourceHandler</a> and chains them together:
</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr"><div class="java source-java"><pre class="de1"> <span class="kw1">public</span> TestServer<span class="br0">(</span><span class="kw4">int</span> port<span class="br0">)</span>
<span class="br0">{</span>
    _connector <span class="sy0">=</span> <span class="kw1">new</span> SelectChannelConnector<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    _connector.<span class="me1">setPort</span><span class="br0">(</span>port<span class="br0">)</span><span class="sy0">;</span>
    addConnector<span class="br0">(</span>_connector<span class="br0">)</span><span class="sy0">;</span>
 
    _wsHandler <span class="sy0">=</span> <span class="kw1">new</span> WebSocketHandler<span class="br0">(</span><span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw1">public</span> WebSocket doWebSocketConnect<span class="br0">(</span>HttpServletRequest request, <span class="kw3">String</span> protocol<span class="br0">)</span>
        <span class="br0">{</span>
            ...
            <span class="kw1">return</span> _websocket<span class="sy0">;</span>
        <span class="br0">}</span>
    <span class="br0">}</span><span class="sy0">;</span>
    setHandler<span class="br0">(</span>_wsHandler<span class="br0">)</span><span class="sy0">;</span>
 
    _rHandler<span class="sy0">=</span><span class="kw1">new</span> ResourceHandler<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    _rHandler.<span class="me1">setDirectoriesListed</span><span class="br0">(</span><span class="kw2">true</span><span class="br0">)</span><span class="sy0">;</span>
    _rHandler.<span class="me1">setResourceBase</span><span class="br0">(</span>_docroot<span class="br0">)</span><span class="sy0">;</span>
    _wsHandler.<span class="me1">setHandler</span><span class="br0">(</span>_rHandler<span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span></pre></div></div>
<p>The resource handler is responsible for serving the static content like HTML and Javascript. The WebSocketHandler looks for WebSocket handshake requests and handles them by calling the <tt>doWebSocketConnect</tt> method, which we have extended to create a WebSocket depending on the sub protocol passed:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">_wsHandler <span class="sy0">=</span> <span class="kw1">new</span> WebSocketHandler<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">public</span> WebSocket doWebSocketConnect<span class="br0">(</span>HttpServletRequest request, <span class="kw3">String</span> protocol<span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw1">if</span> <span class="br0">(</span><span class="st0">"org.ietf.websocket.test-echo"</span>.<span class="me1">equals</span><span class="br0">(</span>protocol<span class="br0">)</span> <span class="sy0">||</span> <span class="st0">"echo"</span>.<span class="me1">equals</span><span class="br0">(</span>protocol<span class="br0">)</span> <span class="sy0">||</span> <span class="st0">"lws-mirror-protocol"</span>.<span class="me1">equals</span><span class="br0">(</span>protocol<span class="br0">)</span><span class="br0">)</span>
            _websocket <span class="sy0">=</span> <span class="kw1">new</span> TestEchoWebSocket<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span><span class="st0">"org.ietf.websocket.test-echo-broadcast"</span>.<span class="me1">equals</span><span class="br0">(</span>protocol<span class="br0">)</span><span class="br0">)</span>
            _websocket <span class="sy0">=</span> <span class="kw1">new</span> TestEchoBroadcastWebSocket<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span><span class="st0">"org.ietf.websocket.test-echo-assemble"</span>.<span class="me1">equals</span><span class="br0">(</span>protocol<span class="br0">)</span><span class="br0">)</span>
            _websocket <span class="sy0">=</span> <span class="kw1">new</span> TestEchoAssembleWebSocket<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span><span class="st0">"org.ietf.websocket.test-echo-fragment"</span>.<span class="me1">equals</span><span class="br0">(</span>protocol<span class="br0">)</span><span class="br0">)</span>
            _websocket <span class="sy0">=</span> <span class="kw1">new</span> TestEchoFragmentWebSocket<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>protocol<span class="sy0">==</span><span class="kw2">null</span><span class="br0">)</span>
            _websocket <span class="sy0">=</span> <span class="kw1">new</span> TestWebSocket<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw1">return</span> _websocket<span class="sy0">;</span>
    <span class="br0">}</span>
<span class="br0">}</span><span class="sy0">;</span></pre></div></div>
<p>A simplification of the test <a href="http://download.eclipse.org/jetty/7.4.0.v20110414/xref/org/eclipse/jetty/websocket/WebSocket.html" rel="nofollow" class="external text">WebSocket</a> from the test server follows. It excludes the shared code for the other protocols supported. Like the Javascript API, there is an <tt>onOpen, onClose</tt> and <tt>onMessage</tt> callback. The <tt>onOpen</tt> callback is passed in a <a class="external text" rel="nofollow" href="http://download.eclipse.org/jetty/7.4.0.v20110414/xref/org/eclipse/jetty/websocket/WebSocket.html#107">Connection</a> instance that sends messages. The implementation of <tt>onOpen</tt> adds the WebSocket to a collection of all known WebSockets, and <tt>onClose</tt> removes the WebSocket. The implementation of <tt>onMessage</tt> is to simply iterate through that collection and to send the received message to each WebSocket:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">ConcurrentLinkedQueue _broadcast <span class="sy0">=</span>
    <span class="kw1">new</span> ConcurrentLinkedQueue<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="kw1">class</span> TestEchoBroadcastWebSocket <span class="kw1">implements</span> WebSocket.<span class="me1">OnTextMessage</span>
<span class="br0">{</span>
    <span class="kw1">protected</span> <span class="kw3">Connection</span> _connection<span class="sy0">;</span>
 
    <span class="kw1">public</span> <span class="kw4">void</span> onOpen<span class="br0">(</span><span class="kw3">Connection</span> connection<span class="br0">)</span>
    <span class="br0">{</span>
        _connection<span class="sy0">=</span>connection<span class="sy0">;</span>
        _broadcast.<span class="me1">add</span><span class="br0">(</span><span class="kw1">this</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
    <span class="kw1">public</span> <span class="kw4">void</span> onClose<span class="br0">(</span><span class="kw4">int</span> code,<span class="kw3">String</span> message<span class="br0">)</span>
    <span class="br0">{</span>
        _broadcast.<span class="me1">remove</span><span class="br0">(</span><span class="kw1">this</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
    <span class="kw1">public</span> <span class="kw4">void</span> onMessage<span class="br0">(</span><span class="kw1">final</span> <span class="kw3">String</span> data<span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw1">for</span> <span class="br0">(</span>TestEchoBroadcastWebSocket ws <span class="sy0">:</span> _broadcast<span class="br0">)</span>
        <span class="br0">{</span>
            <span class="kw1">try</span>
            <span class="br0">{</span>
                ws._connection.<span class="me1">sendMessage</span><span class="br0">(</span>data<span class="br0">)</span><span class="sy0">;</span>
            <span class="br0">}</span>
            <span class="kw1">catch</span> <span class="br0">(</span><span class="kw3">IOException</span> e<span class="br0">)</span>
            <span class="br0">{</span>
                _broadcast.<span class="me1">remove</span><span class="br0">(</span>ws<span class="br0">)</span><span class="sy0">;</span>
                e.<span class="me1">printStackTrace</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
            <span class="br0">}</span>
        <span class="br0">}</span>
    <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<h2><span class="mw-headline" id="Don.E2.80.99t_do_it_this_way.21">Don’t do it this way!</span></h2>
<p>Now you know the basics of how WebSockets work, I repeat my warning that you should not do it this way – unless you are a framework developer.   Even then, you probably want to use the <a href="http://download.eclipse.org/jetty/7.4.0.v20110414/xref/org/eclipse/jetty/websocket/WebSocketServlet.html" rel="nofollow" class="external text">WebSocketServlet</a> and a non embedded Jetty, but the basic concepts are the same. The strength of the Jetty solution is that it terminates both WebSocket connections and HTTP requests in the same environment, so that mixed frameworks and applications are easy to create.
</p><p>Application developers should really look to a framework like <a class="external text" href="http://cometd.org" rel="nofollow">Cometd</a> rather than directly coding to WebSockets themselves.  It is not that the mechanics of WebSockets are hard, just that they don’t solve all of the problems that you encounter in a real world Comet application.
</p>
<h2><span id="Additional_Resources" class="mw-headline">Additional Resources</span></h2>
<p><a href="http://wiki.eclipse.org/Jetty_WTP_Plugin/Jetty_WTP_Websocket_Wizard" rel="nofollow" class="external text">Using the WTP WebSocket Wizard</a>
</p>
<!-- 
NewPP limit report
Cached time: 20211116180117
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.440 seconds
Real time usage: 0.462 seconds
Preprocessor visited node count: 153/1000000
Preprocessor generated node count: 639/1000000
Post‐expand include size: 13362/2097152 bytes
Template argument size: 11135/2097152 bytes
Highest expansion depth: 6/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%  362.412      1 - Template:Jetty_Feature
100.00%  362.412      1 - -total
  3.93%   14.225      3 - Template:Message
  3.58%   12.979      1 - Template:Jetty_TODO
  2.39%    8.659      2 - Template:Note
  1.16%    4.190      1 - Template:Jetty
-->

<!-- Saved in parser cache with key my_wiki:pcache:idhash:32856-0!*!*!!en!5!* and timestamp 20211116180116 and revision id 334778
 -->
</div>
                                      <!-- catlinks -->
                    <div class="catlinks" id="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://wiki.eclipse.org/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a title="Category:Jetty" href="https://wiki.eclipse.org/Category:Jetty">Jetty</a></li><li><a href="https://wiki.eclipse.org/Category:Jetty_Feature" title="Category:Jetty Feature">Jetty Feature</a></li></ul></div></div>                     <!-- /catlinks -->
                                  </div>
              </div>
            </div>
          </div>
        <!-- /maincontent -->

                <!-- printfooter -->
        <div class="printfooter">
        Retrieved from "<a dir="ltr" href="https://wiki.eclipse.org/index.php?title=Jetty/Feature/WebSockets&amp;oldid=334778">https://wiki.eclipse.org/index.php?title=Jetty/Feature/WebSockets&amp;oldid=334778</a>"        </div>
        <!-- /printfooter -->
        
        
        <!-- debughtml -->
                <!-- /debughtml -->

      </div>
      <!-- /bodyContent -->
    </section>
    <!-- /content -->

    <!-- footer -->
    
</div>
<div class="featured-footer featured-footer-newsletter background-secondary">
  <div class="container">
    <p id="footercredit">This page was last modified 14:22, 23 April 2013 by <a title="User:Jesse.mcconnell.gmail.com" href="https://wiki.eclipse.org/User:Jesse.mcconnell.gmail.com">Jesse McConnell</a>. Based on work by <a href="https://wiki.eclipse.org/User:Joakim.erdfelt.gmail.com" title="User:Joakim.erdfelt.gmail.com">Joakim Erdfelt</a>, <a class="new" title="User:Gregw.webtide.com (page does not exist)" href="https://wiki.eclipse.org/index.php?title=User:Gregw.webtide.com&amp;action=edit&amp;redlink=1">Greg Wilkins</a> and <a class="new" href="https://wiki.eclipse.org/index.php?title=User:EclipseTER.yopmail.com&amp;action=edit&amp;redlink=1" title="User:EclipseTER.yopmail.com (page does not exist)">eclipse TER</a> and <a title="Jetty/Feature/WebSockets" href="https://wiki.eclipse.org/index.php?title=Jetty/Feature/WebSockets&amp;action=credits">others</a>.</p><p id="footerviews"/>  </div>
</div>
</main> <!-- /#main-content-container-row -->
<p id="back-to-top" class="noprint hidden-print">
  <a class="visible-xs" href="WebSockets.html#top">Back to the top</a>
</p>
<footer id="solstice-footer">
  <div class="container">
    <div class="row">
      <section class="col-sm-6 hidden-print" id="footer-eclipse-foundation">
        <h2 class="section-title">Eclipse Foundation</h2>
        <ul class="nav">
          <li><a href="https://www.eclipse.org/org/">About Us</a></li>
          <li><a href="https://www.eclipse.org/org/foundation/contact.php">Contact Us</a></li>
          <li><a href="https://www.eclipse.org/donate">Donate</a></li>
          <li><a href="https://www.eclipse.org/membership/">Members</a></li>
          <li><a href="https://www.eclipse.org/org/documents/">Governance</a></li>
          <li><a href="https://www.eclipse.org/org/documents/Community_Code_of_Conduct.php">Code of Conduct</a></li>
          <li><a href="https://www.eclipse.org/artwork/">Logo and Artwork</a></li>
          <li><a href="https://www.eclipse.org/org/foundation/directors.php">Board of Directors</a></li>
        </ul>
      </section>
      <section class="col-sm-6 hidden-print" id="footer-legal">
        <h2 class="section-title">Legal</h2>
        <ul class="nav">
          <li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li>
          <li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
          <li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
          <li><a href="https://www.eclipse.org/legal/epl-2.0/">Eclipse Public License</a></li>
          <li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li>
        </ul>
      </section>
      <section id="footer-useful-links" class="col-sm-6 hidden-print">
        <h2 class="section-title">Useful Links</h2>
        <ul class="nav">
          <li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li>
          <li><a href="https://help.eclipse.org/">Documentation</a></li>
          <li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li>
          <li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li>
          <li><a href="https://www.eclipse.org/forums/">Forums</a></li>
          <li><a href="https://marketplace.eclipse.org/">Marketplace</a></li>
        </ul>
      </section>
      <section class="col-sm-6 hidden-print" id="footer-other">
        <h2 class="section-title">Other</h2>
        <ul class="nav">
          <li><a href="https://www.eclipse.org/ide/">IDE and Tools</a></li>
          <li><a href="https://www.eclipse.org/projects">Projects</a></li>
          <li><a href="https://www.eclipse.org/org/workinggroups/">Working Groups</a></li>
          <li><a href="https://www.eclipse.org/org/research/">Research@Eclipse</a></li>
          <li><a href="https://www.eclipse.org/security/">Report a Vulnerability</a></li>
          <li><a href="https://status.eclipse.org">Service Status</a></li>
        </ul>
      </section>
      <div class="col-sm-24 margin-top-20">
        <div class="row">
          <div class="col-md-16" id="copyright">
            <p id="copyright-text">Copyright © Eclipse Foundation, Inc. All Rights Reserved.</p>
          </div>
          <div class="col-md-8 social-media">
            <ul class="list-inline">
              <li>
                <a href="https://twitter.com/EclipseFdn" class="social-media-link fa-stack fa-lg">
                <i class="fa fa-circle-thin fa-stack-2x"/>
                <i class="fa fa-twitter fa-stack-1x"/>
                </a>
              </li>
              <li>
                <a href="https://www.facebook.com/eclipse.org" class="social-media-link fa-stack fa-lg">
                <i class="fa fa-circle-thin fa-stack-2x"/>
                <i class="fa fa-facebook fa-stack-1x"/>
                </a>
              </li>
              <li>
                <a class="social-media-link fa-stack fa-lg" href="https://www.youtube.com/user/EclipseFdn">
                <i class="fa fa-circle-thin fa-stack-2x"/>
                <i class="fa fa-youtube fa-stack-1x"/>
                </a>
              </li>
              <li>
                <a href="https://www.linkedin.com/company/eclipse-foundation" class="social-media-link fa-stack fa-lg">
                <i class="fa fa-circle-thin fa-stack-2x"/>
                <i class="fa fa-linkedin fa-stack-1x"/>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <a class="scrollup" href="WebSockets.html#">Back to the top</a>
    </div>
  </div>
</footer>
    <!-- /footer -->
    <script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"skins.solstice":"loading","user":"ready","user.groups":"ready"});mw.loader.load("/load.php?debug=false\u0026lang=en\u0026modules=skins.solstice\u0026only=scripts\u0026skin=solstice");mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);
} );</script><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":526});
} );</script>  

</body></html>
