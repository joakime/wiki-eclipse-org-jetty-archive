<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Jetty WTP Plugin</title>
    <link href="wiki-style.css" media="screen, print" rel="stylesheet" />
  </head>
  <body>
    <div class="col-md-20" id="mainContent">
      <div class="tab-content background-white">
        <div class="tab-pane active" id="tab-pane-main-page-content">
          <h1 class="firstHeading page-header" id="firstHeading">
            <span dir="auto">Jetty/Tutorial/EclipseRT-Jetty-Starter-Kit</span>
          </h1>
          <div id="main-page-content">
            <div class="alert alert-small alert-warning" id="contentSub">
              <span class="subpages">
                &lt;
                <a href="../../Jetty.html" title="Jetty">Jetty</a>
                â€Ž |
                <a href="../Tutorial.html" title="Jetty/Tutorial">Tutorial</a>
              </span>
            </div>
            <div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
              <p>
                <br />
              </p>
              <p>
                <br />
              </p>
              <div class="toc" id="toc">
                <div id="toctitle">
                  <h2>Contents</h2>
                </div>
                <ul>
                  <li class="toclevel-1">
                    <a href="EclipseRT-Jetty-Starter-Kit.html#Introduction">
                      <span class="tocnumber">1</span>
                      <span class="toctext">Introduction</span>
                    </a>
                  </li>
                  <li class="toclevel-1">
                    <a href="EclipseRT-Jetty-Starter-Kit.html#Details">
                      <span class="tocnumber">2</span>
                      <span class="toctext">Details</span>
                    </a>
                  </li>
                  <li class="toclevel-1">
                    <a href="EclipseRT-Jetty-Starter-Kit.html#Starter_Kit_Overview">
                      <span class="tocnumber">3</span>
                      <span class="toctext">Starter Kit Overview</span>
                    </a>
                  </li>
                  <li class="toclevel-1">
                    <a href="EclipseRT-Jetty-Starter-Kit.html#On_the_command-line">
                      <span class="tocnumber">4</span>
                      <span class="toctext">On the command-line</span>
                    </a>
                    <ul>
                      <li class="toclevel-2">
                        <a href="EclipseRT-Jetty-Starter-Kit.html#Launch">
                          <span class="tocnumber">4.1</span>
                          <span class="toctext">Launch</span>
                        </a>
                      </li>
                      <li class="toclevel-2">
                        <a href="EclipseRT-Jetty-Starter-Kit.html#Jetty_server_configuration">
                          <span class="tocnumber">4.2</span>
                          <span class="toctext">Jetty server configuration</span>
                        </a>
                      </li>
                      <li class="toclevel-2">
                        <a href="EclipseRT-Jetty-Starter-Kit.html#Logging_configuration">
                          <span class="tocnumber">4.3</span>
                          <span class="toctext">Logging configuration</span>
                        </a>
                      </li>
                      <li class="toclevel-2">
                        <a href="EclipseRT-Jetty-Starter-Kit.html#Upgrade_and_bundle_management">
                          <span class="tocnumber">4.4</span>
                          <span class="toctext">Upgrade and bundle management</span>
                        </a>
                      </li>
                      <li class="toclevel-2">
                        <a href="EclipseRT-Jetty-Starter-Kit.html#Dropins_reconciler">
                          <span class="tocnumber">4.5</span>
                          <span class="toctext">Dropins reconciler</span>
                        </a>
                      </li>
                      <li class="toclevel-2">
                        <a href="EclipseRT-Jetty-Starter-Kit.html#J2EE_support">
                          <span class="tocnumber">4.6</span>
                          <span class="toctext">J2EE support</span>
                        </a>
                      </li>
                    </ul>
                  </li>
                  <li class="toclevel-1">
                    <a href="EclipseRT-Jetty-Starter-Kit.html#With_Eclipse_PDE">
                      <span class="tocnumber">5</span>
                      <span class="toctext">With Eclipse PDE</span>
                    </a>
                    <ul>
                      <li class="toclevel-2">
                        <a href="EclipseRT-Jetty-Starter-Kit.html#Import_the_Starter_Kit_in_the_workspace">
                          <span class="tocnumber">5.1</span>
                          <span class="toctext">Import the Starter Kit in the workspace</span>
                        </a>
                      </li>
                      <li class="toclevel-2">
                        <a href="EclipseRT-Jetty-Starter-Kit.html#Setup_the_Target_Platform">
                          <span class="tocnumber">5.2</span>
                          <span class="toctext">Setup the Target Platform</span>
                        </a>
                      </li>
                      <li class="toclevel-2">
                        <a href="EclipseRT-Jetty-Starter-Kit.html#Launch_configuration">
                          <span class="tocnumber">5.3</span>
                          <span class="toctext">Launch configuration</span>
                        </a>
                      </li>
                      <li class="toclevel-2">
                        <a href="EclipseRT-Jetty-Starter-Kit.html#Web-bundles_and_test_units">
                          <span class="tocnumber">5.4</span>
                          <span class="toctext">Web-bundles and test units</span>
                        </a>
                      </li>
                    </ul>
                  </li>
                  <li class="toclevel-1">
                    <a href="EclipseRT-Jetty-Starter-Kit.html#Additional_Resources">
                      <span class="tocnumber">6</span>
                      <span class="toctext">Additional Resources</span>
                    </a>
                  </li>
                </ul>
              </div>
              <h2>
                <span class="mw-headline" id="Introduction">Introduction</span>
              </h2>
              <p>
                <br />
                This tutorial shows how to use the EclipseRT Jetty Starter Kit.
              </p>
              <h2>
                <span class="mw-headline" id="Details">Details</span>
              </h2>
              <h2>
                <span class="mw-headline" id="Starter_Kit_Overview">Starter Kit Overview</span>
              </h2>
              <p>EclipseRT Jetty Starter Kit is configured out of the box with</p>
              <ul>
                <li>Equinox</li>
                <li>p2 support: simpleconfigurator, dropins reconciler, provisioning commands for the OSGi console</li>
                <li>slf4j, logback</li>
                <li>Jetty-7: servlet-2.5, JSP-2.1, JMX, JNDI, JTA, Websocket and continuations, OSGi HttpService with equinox.http.servlet ...</li>
                <li>Development additions: sources, JUnit support and PDE files.</li>
              </ul>
              <p>
                Current download URL:
                <a class="external free" href="http://download.eclipse.org/jetty/7.1.4.v20100610/dist-eclipse/" rel="nofollow">http://download.eclipse.org/jetty/7.1.4.v20100610/dist-eclipse/</a>
              </p>
              <h2>
                <span class="mw-headline" id="On_the_command-line">On the command-line</span>
              </h2>
              <h3>
                <span class="mw-headline" id="Launch">Launch</span>
              </h3>
              <p>The starter kit can be launched via the equinox native launcher or directly through java.
Regardless of the platform, the starter kit is packaged with simple shell scripts "start.bat" and "start.sh".
Note that those scripts don't read the ini file read by the native launcher.</p>
              <h3>
                <span class="mw-headline" id="Jetty_server_configuration">Jetty server configuration</span>
              </h3>
              <p>The jetty server is configured via the etc/jetty.xml file.</p>
              <h3>
                <span class="mw-headline" id="Logging_configuration">Logging configuration</span>
              </h3>
              <p>slf4j, logback: configured in etc/logback.xml</p>
              <h3>
                <span class="mw-headline" id="Upgrade_and_bundle_management">Upgrade and bundle management</span>
              </h3>
              <p>Via p2 (link to the p2 console command controles and the p2 admin UI.)
For example one can add JPA to the starter kit using the p2 provisioning commands:</p>
              <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
                <div class="text source-text">
                  <pre class="de1">osgi&gt; provaddrepo http://download.eclipse.org/releases/helios

osgi&gt; provliu http://download.eclipse.org/releases/helios
...
org.eclipse.persistence.jpa 2.1.0.v20100608-r7540
...

osgi&gt; provinstall org.eclipse.persistence.jpa 2.1.0.v20100608-r7540
Installation complete for org.eclipse.persistence.jpa 2.1.0.v20100608-r7540</pre>
                </div>
              </div>
              <p>Note that it can take several minutes to install JPA for example.
Note: Please refer to the documentation of each feature added.</p>
              <p>
                For example EclipseLink in Helios requires that javax.persistence starts before org.eclipse.persistence.jpa.
                <a href="https://wiki.eclipse.org/EclipseLink/Examples/OSGi/Equinox_Byte_Code_Weaving#Equinox_Configuration" title="EclipseLink/Examples/OSGi/Equinox Byte Code Weaving">EclipseLink/Examples/OSGi/Equinox_Byte_Code_Weaving#Equinox_Configuration</a>
              </p>
              <p>One could also use the p2 Admin application to do this or an ant script as documented by the p2 project.</p>
              <h3>
                <span class="mw-headline" id="Dropins_reconciler">Dropins reconciler</span>
              </h3>
              <p>It is possible to add bundles in the dropins folder. This is only for development purposes.
For production it is recommended to publish your bundles and features in a p2 repository and use p2 to install them into the Starter Kit.</p>
              <h3>
                <span class="mw-headline" id="J2EE_support">J2EE support</span>
              </h3>
              <ul>
                <li>Web application can be dropped in the webapps folder.</li>
                <li>Jetty Context files can be defined in the contexts folder.</li>
                <li>Shared libraries between webapps can be placed inside lib/ext.</li>
              </ul>
              <p>The resulting applications's classloaders behave in the same manner than in the traditional J2EE distribution of Jetty.
Those web-applications and shared libraries don't have access to classes provided by OSGi bundles.</p>
              <h2>
                <span class="mw-headline" id="With_Eclipse_PDE">With Eclipse PDE</span>
              </h2>
              <p>The version with sources of the starter kit is packaged with a set of files for the PDE.
This makes it faster to define the corresponding target platform and launch configuration.</p>
              <h3>
                <span class="mw-headline" id="Import_the_Starter_Kit_in_the_workspace">Import the Starter Kit in the workspace</span>
              </h3>
              <p>Import the downloaded starter kit as a Eclipse Project into your workspace. The project is called "EclipseRT Jetty Starter Kit".</p>
              <h3>
                <span class="mw-headline" id="Setup_the_Target_Platform">Setup the Target Platform</span>
              </h3>
              <p>At the root of the project, open the JettyStarterKitSDK.target file.
Click on the top left on "Set As Target Platform."</p>
              <div class="center">
                <div class="floatnone">
                  <a class="image" href="https://wiki.eclipse.org/File:16-JOT-Jetty-StarterKit-SDK-Target-Platform.png" title="Define the Target Platform">
                    <img alt="Define the Target Platform" height="601" src="../../images/a/ae/16-JOT-Jetty-StarterKit-SDK-Target-Platform.png" width="1134" />
                  </a>
                </div>
              </div>
              <p>Note: You can also use the Target Platform definition wizard instead.</p>
              <h3>
                <span class="mw-headline" id="Launch_configuration">Launch configuration</span>
              </h3>
              <p>The launch configuration "Start Jetty" is preset.</p>
              <p>To create one from scratch, make a new OSGi launch configuration.
Add the following system properties to the VM arguments:</p>
              <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
                <div class="text source-text">
                  <pre class="de1">-Djetty.home=${workspace_loc:Jetty Starter Kit} -Dlogback.configurationFile=${workspace_loc:Jetty Starter Kit}/etc/logback.xml</pre>
                </div>
              </div>
              <div class="center">
                <div class="floatnone">
                  <a class="image" href="https://wiki.eclipse.org/File:17-JOT-Jetty-StarterKit-Launch-Config.png" title="launch Configuration with the EclipseRT Starter Kit">
                    <img alt="launch Configuration with the EclipseRT Starter Kit" height="666" src="../../images/0/05/17-JOT-Jetty-StarterKit-Launch-Config.png" width="1064" />
                  </a>
                </div>
              </div>
              <h3>
                <span class="mw-headline" id="Web-bundles_and_test_units">Web-bundles and test units</span>
              </h3>
              <p>
                Please refer to
                <a href="Jetty-OSGi SDK.html#Create_a_first_web-bundle" title="Jetty/Tutorial/Jetty-OSGi SDK">Jetty OSGi Target Platform, tutorial; Create_a_first_web-bundle</a>
              </p>
              <h2>
                <span class="mw-headline" id="Additional_Resources">Additional Resources</span>
              </h2>
              <p>
                <a href="../Feature/Jetty OSGi.html" title="Jetty/Feature/Jetty OSGi">Jetty-OSGi</a>
                ,
                <a href="Jetty-OSGi SDK.html" title="Jetty/Tutorial/Jetty-OSGi SDK">Jetty OSGi Target Platform, tutorial</a>
                , RFC66, PDE
              </p>
            </div>
            <div class="catlinks" id="catlinks">
              <div class="mw-normal-catlinks" id="mw-normal-catlinks">
                <a href="https://wiki.eclipse.org/Special:Categories" title="Special:Categories">Categories</a>
                :
                <ul>
                  <li>
                    <a href="https://wiki.eclipse.org/Category:Jetty" title="Category:Jetty">Jetty</a>
                  </li>
                  <li>
                    <a class="new" href="edit" title="Category:OSGi (page does not exist)">OSGi</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
