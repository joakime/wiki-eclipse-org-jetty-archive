<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Jetty WTP Plugin</title>
    <link href="../../wiki-style.css" media="screen, print" rel="stylesheet" />
  </head>
  <body>
    <div class="col-md-20" id="mainContent">
      <div class="tab-content background-white">
        <div class="tab-pane active" id="tab-pane-main-page-content">
          <h1 class="firstHeading page-header" id="firstHeading">
            <span dir="auto">Jetty/Tutorial/Jetty-OSGi SDK</span>
          </h1>
          <div id="main-page-content">
            <div class="alert alert-small alert-warning" id="contentSub">
              <span class="subpages">
                &lt;
                <a href="../../Jetty.html" title="Jetty">Jetty</a>
                |
                <a href="../Tutorial.html" title="Jetty/Tutorial">Tutorial</a>
              </span>
            </div>
            <div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
              <p>
                <br />
              </p>
              <p>
                <br />
              </p>
              <div class="toc" id="toc">
                <div id="toctitle">
                  <h2>Contents</h2>
                </div>
                <ul>
                  <li class="toclevel-1">
                    <a href="Jetty-OSGi%20SDK.html#Introduction">
                      <span class="tocnumber">1</span>
                      <span class="toctext">Introduction</span>
                    </a>
                  </li>
                  <li class="toclevel-1">
                    <a href="Jetty-OSGi%20SDK.html#Details">
                      <span class="tocnumber">2</span>
                      <span class="toctext">Details</span>
                    </a>
                  </li>
                  <li class="toclevel-1">
                    <a href="Jetty-OSGi%20SDK.html#Configure_a_Target_Platform_and_run_a_simple_Test_Unit_with_PDE">
                      <span class="tocnumber">3</span>
                      <span class="toctext">Configure a Target Platform and run a simple Test Unit with PDE</span>
                    </a>
                    <ul>
                      <li class="toclevel-2">
                        <a href="Jetty-OSGi%20SDK.html#Target_Platform_with_JUnit_Support">
                          <span class="tocnumber">3.1</span>
                          <span class="toctext">Target Platform with JUnit Support</span>
                        </a>
                      </li>
                      <li class="toclevel-2">
                        <a href="Jetty-OSGi%20SDK.html#OSGi_bundle_with_a_test_unit">
                          <span class="tocnumber">3.2</span>
                          <span class="toctext">OSGi bundle with a test unit</span>
                        </a>
                      </li>
                    </ul>
                  </li>
                  <li class="toclevel-1">
                    <a href="Jetty-OSGi%20SDK.html#Setup_Jetty_and_a_first_Web-bundle">
                      <span class="tocnumber">4</span>
                      <span class="toctext">Setup Jetty and a first Web-bundle</span>
                    </a>
                    <ul>
                      <li class="toclevel-2">
                        <a href="Jetty-OSGi%20SDK.html#Setup_Jetty_Target_Component">
                          <span class="tocnumber">4.1</span>
                          <span class="toctext">Setup Jetty Target Component</span>
                        </a>
                      </li>
                      <li class="toclevel-2">
                        <a href="Jetty-OSGi%20SDK.html#Create_a_first_web-bundle">
                          <span class="tocnumber">4.2</span>
                          <span class="toctext">Create a first web-bundle</span>
                        </a>
                      </li>
                      <li class="toclevel-2">
                        <a href="Jetty-OSGi%20SDK.html#Launch_configuration">
                          <span class="tocnumber">4.3</span>
                          <span class="toctext">Launch configuration</span>
                        </a>
                      </li>
                      <li class="toclevel-2">
                        <a href="Jetty-OSGi%20SDK.html#Notes:_where_is_the_jetty_server_configured">
                          <span class="tocnumber">4.4</span>
                          <span class="toctext">Notes: where is the jetty server configured</span>
                        </a>
                      </li>
                    </ul>
                  </li>
                  <li class="toclevel-1">
                    <a href="Jetty-OSGi%20SDK.html#Automated_test_for_the_servlet">
                      <span class="tocnumber">5</span>
                      <span class="toctext">Automated test for the servlet</span>
                    </a>
                  </li>
                  <li class="toclevel-1">
                    <a href="Jetty-OSGi%20SDK.html#EclipseRT_Jetty_Starter_Kit">
                      <span class="tocnumber">6</span>
                      <span class="toctext">EclipseRT Jetty Starter Kit</span>
                    </a>
                  </li>
                  <li class="toclevel-1">
                    <a href="Jetty-OSGi%20SDK.html#Additional_Resources">
                      <span class="tocnumber">7</span>
                      <span class="toctext">Additional Resources</span>
                    </a>
                  </li>
                </ul>
              </div>
              <h2>
                <span class="mw-headline" id="Introduction">Introduction</span>
              </h2>
            </div>
            <ul>
              <li>
                A new line that defines the context path for the web-application:
                <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
                  <div class="text source-text">
                    <pre class="de1" xml:space="preserve">Web-ContextPath: /test</pre>
                  </div>
                </div>
              </li>
            </ul>
            <p>It should look like this:</p>
            <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
              <div class="text source-text">
                <pre class="de1" xml:space="preserve">Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Webapp
Bundle-SymbolicName: org.eclipse.jetty.example.webapp
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: org.eclipse.jetty.example.webapp.Activator
Import-Package: org.osgi.framework;version="1.3.0",
 javax.servlet;version="2.5.0",
 javax.servlet.http;version="2.5.0"
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Web-ContextPath: /test</pre>
              </div>
            </div>
            <ul>
              <li>Now create a new file WEB-INF/web.xml at the root of the project.</li>
            </ul>
            <p>And define a simple servlet-mapping:</p>
            <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
              <div class="xml source-xml">
                <pre class="de1" xml:space="preserve"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">"1.0"</span> <span class="re0">encoding</span>=<span class="st0">"ISO-8859-1"</span><span class="re2">?&gt;</span></span>
<span class="sc3"><span class="re1">&lt;web-app</span></span>
<span class="sc3">   <span class="re0">xmlns</span>=<span class="st0">"http://java.sun.com/xml/ns/javaee"</span></span>
<span class="sc3">   <span class="re0">xmlns:xsi</span>=<span class="st0">"http://www.w3.org/2001/XMLSchema-instance"</span></span>
<span class="sc3">   <span class="re0">xsi:schemaLocation</span>=<span class="st0">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span></span>
<span class="sc3">   <span class="re0">version</span>=<span class="st0">"2.5"</span><span class="re2">&gt;</span></span>
 
   <span class="sc3"><span class="re1">&lt;display-name<span class="re2">&gt;</span></span></span>Hello Webapp<span class="sc3"><span class="re1">&lt;/display-name<span class="re2">&gt;</span></span></span>
   <span class="sc3"><span class="re1">&lt;servlet<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;servlet-name<span class="re2">&gt;</span></span></span>theservlet<span class="sc3"><span class="re1">&lt;/servlet-name<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;servlet-class<span class="re2">&gt;</span></span></span>org.eclipse.jetty.example.webapp.Servlet<span class="sc3"><span class="re1">&lt;/servlet-class<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;load-on-startup<span class="re2">&gt;</span></span></span>1<span class="sc3"><span class="re1">&lt;/load-on-startup<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;/servlet<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;servlet-mapping<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;servlet-name<span class="re2">&gt;</span></span></span>theservlet<span class="sc3"><span class="re1">&lt;/servlet-name<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;url-pattern<span class="re2">&gt;</span></span></span>/*<span class="sc3"><span class="re1">&lt;/url-pattern<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;/servlet-mapping<span class="re2">&gt;</span></span></span>
 
<span class="sc3"><span class="re1">&lt;/web-app<span class="re2">&gt;</span></span></span></pre>
              </div>
            </div>
            <ul>
              <li>Create a org.eclipse.jetty.example.webapp.Servlet class</li>
            </ul>
            <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
              <div class="java source-java">
                <pre class="de1" xml:space="preserve"><span class="kw1">package</span> <span class="co2">org.eclipse.jetty.example.webapp</span><span class="sy0">;</span>
 
<span class="kw1">import</span> <span class="co2">java.io.IOException</span><span class="sy0">;</span>
 
<span class="kw1">import</span> <span class="co2">javax.servlet.ServletConfig</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">javax.servlet.ServletException</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">javax.servlet.http.HttpServlet</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">javax.servlet.http.HttpServletRequest</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">javax.servlet.http.HttpServletResponse</span><span class="sy0">;</span>
 
<span class="co3">/** A simple servlet */</span>
<span class="kw1">public</span> <span class="kw1">class</span> Servlet <span class="kw1">extends</span> HttpServlet <span class="br0">{</span>
	<span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">long</span> serialVersionUID <span class="sy0">=</span> 1L<span class="sy0">;</span>
 
	<span class="kw1">public</span> <span class="kw4">void</span> init<span class="br0">(</span>ServletConfig config<span class="br0">)</span> <span class="kw1">throws</span> ServletException <span class="br0">{</span>
		<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"Initializing the servlet"</span><span class="br0">)</span><span class="sy0">;;</span>
	<span class="br0">}</span>
	<span class="kw1">protected</span> <span class="kw4">void</span> doGet<span class="br0">(</span>HttpServletRequest req, HttpServletResponse resp<span class="br0">)</span>
			<span class="kw1">throws</span> ServletException, <span class="kw3">IOException</span> <span class="br0">{</span>
		<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"DO GET!"</span><span class="br0">)</span><span class="sy0">;</span>
		resp.<span class="me1">getWriter</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">write</span><span class="br0">(</span><span class="st0">"Howdy!"</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
<span class="br0">}</span></pre>
              </div>
            </div>
            <h3>
              <span class="mw-headline" id="Launch_configuration">Launch configuration</span>
            </h3>
            <p>slf4j/logback are bundled by default.
Some extra steps are necessary to prevent all logs from appearing on the console.</p>
            <p>Create a new file logback.xml at the root of the web-bundle project and paste this configuration:</p>
            <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
              <div class="xml source-xml">
                <pre class="de1" xml:space="preserve"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">"1.0"</span> <span class="re0">encoding</span>=<span class="st0">"UTF-8"</span> <span class="re2">?&gt;</span></span>
<span class="sc3"><span class="re1">&lt;configuration<span class="re2">&gt;</span></span></span>
	<span class="sc3"><span class="re1">&lt;appender</span> <span class="re0">name</span>=<span class="st0">"STDOUT"</span> <span class="re0">class</span>=<span class="st0">"ch.qos.logback.core.ConsoleAppender"</span><span class="re2">&gt;</span></span>
		<span class="sc3"><span class="re1">&lt;encoder<span class="re2">&gt;</span></span></span>
			<span class="sc3"><span class="re1">&lt;pattern<span class="re2">&gt;</span></span></span>%-4relative [%thread] %-5level %class - %msg%n<span class="sc3"><span class="re1">&lt;/pattern<span class="re2">&gt;</span></span></span>
		<span class="sc3"><span class="re1">&lt;/encoder<span class="re2">&gt;</span></span></span>
	<span class="sc3"><span class="re1">&lt;/appender<span class="re2">&gt;</span></span></span>
	<span class="sc3"><span class="re1">&lt;root<span class="re2">&gt;</span></span></span>
		<span class="sc3"><span class="re1">&lt;level</span> <span class="re0">value</span>=<span class="st0">"error"</span> <span class="re2">/&gt;</span></span>
		<span class="sc3"><span class="re1">&lt;appender-ref</span> <span class="re0">ref</span>=<span class="st0">"STDOUT"</span> <span class="re2">/&gt;</span></span>
	<span class="sc3"><span class="re1">&lt;/root<span class="re2">&gt;</span></span></span>
<span class="sc3"><span class="re1">&lt;/configuration<span class="re2">&gt;</span></span></span></pre>
              </div>
            </div>
            <p>Now Create a new OSGi launch configuration:
Select the menu "Run/Run Configuration..." and choose the node "OSGi".
Create a new configuration; choose the "Arguments" tab and add to the VM arguments area:</p>
            <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
              <div class="text source-text">
                <pre class="de1" xml:space="preserve"> -Dlogback.configurationFile=${workspace_loc:org.eclipse.jetty.example.webapp}/logback.xml</pre>
              </div>
            </div>
            <div class="center">
              <div class="floatnone">
                <a class="image" title="Lazy Activation policy">
                  <img alt="Lazy Activation policy" height="614" src="../../images/15-JOT-OSGi-Launch-configuration.png" width="847" />
                </a>
              </div>
            </div>
            <p>
              <br />
              Now click on "Run".
            </p>
            <p>
              Open a browser and navigate to
              <a class="external free" href="http://localhost:8080/test" rel="nofollow">http://localhost:8080/test</a>
              It will display "Howdy"
            </p>
            <h3>
              <span class="mw-headline" id="Notes:_where_is_the_jetty_server_configured">Notes: where is the jetty server configured</span>
            </h3>
            <p>jetty-osgi looks for ${jetty.home}/etc/jetty.xml for its configuration.
When it can't find it defaults to the one embedded inside itself.
For example: /rt-tutorial-workspace/.metadata/.plugins/org.eclipse.pde.core/.bundle_pool/plugins/org.eclipse.jetty.osgi.boot_7.1.3.v20100526/jettyhome</p>
            <p>It is possible to set the system property jetty.home and point it to a different setup or to edit the jetty.xml file located there.</p>
            <h2>
              <span class="mw-headline" id="Automated_test_for_the_servlet">Automated test for the servlet</span>
            </h2>
            <p>Add to the test bundle the following imports:</p>
            <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
              <div class="text source-text">
                <pre class="de1" xml:space="preserve">Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Test
Bundle-SymbolicName: org.eclipse.jetty.rt.example.test
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: org.eclipse.jetty.rt.example.test.Activator
Import-Package: org.eclipse.jetty,
 org.eclipse.jetty.client,
 org.eclipse.jetty.http,
 org.eclipse.jetty.util,
 org.eclipse.jetty.util.component,
 org.junit;version="4.8.1",
 org.osgi.framework;version="1.3.0"
Bundle-RequiredExecutionEnvironment: J2SE-1.5
Bundle-ActivationPolicy: lazy</pre>
              </div>
            </div>
            <p>
              <br />
              Create the ServletTest class:
            </p>
            <div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
              <div class="java source-java">
                <pre class="de1" xml:space="preserve"><span class="kw1">package</span> <span class="co2">org.eclipse.jetty.rt.example.test</span><span class="sy0">;</span>
 
<span class="kw1">import</span> <span class="co2">org.eclipse.jetty.client.*</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">org.eclipse.jetty.util.Attributes</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">org.eclipse.jetty.http.HttpBuffers</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">org.eclipse.jetty.util.component.AbstractLifeCycle</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">org.eclipse.jetty.http.HttpMethods</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">org.eclipse.jetty.http.HttpStatus</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">org.junit.Assert</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">org.junit.Before</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">org.junit.Test</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">org.osgi.framework.Bundle</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">org.osgi.framework.BundleException</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">org.osgi.framework.FrameworkUtil</span><span class="sy0">;</span>
 
<span class="co3">/**
 * 
 */</span>
                  <span class="kw1">public</span>
                  <span class="kw1">class</span>
                  ServletTest
                  <span class="br0">{</span>
                  <span class="kw1">private</span>
                  HttpClient _client
                  <span class="sy0">;</span>
                  <span class="kw1">protected</span>
                  <span class="kw4">void</span>
                  startClient
                  <span class="br0">(</span>
                  <span class="br0">)</span>
                  <span class="kw1">throws</span>
                  <span class="kw3">Exception</span>
                  <span class="br0">{</span>
                  _client
                  <span class="sy0">=</span>
                  <span class="kw1">new</span>
                  HttpClient
                  <span class="br0">(</span>
                  <span class="br0">)</span>
                  <span class="sy0">;</span>
                  _client.
                  <span class="me1">setConnectorType</span>
                  <span class="br0">(</span>
                  HttpClient.
                  <span class="me1">CONNECTOR_SELECT_CHANNEL</span>
                  <span class="br0">)</span>
                  <span class="sy0">;</span>
                  _client.
                  <span class="me1">start</span>
                  <span class="br0">(</span>
                  <span class="br0">)</span>
                  <span class="sy0">;</span>
                  <span class="br0">}</span>
                  <span class="kw1">protected</span>
                  <span class="kw4">void</span>
                  stopClient
                  <span class="br0">(</span>
                  <span class="br0">)</span>
                  <span class="kw1">throws</span>
                  <span class="kw3">Exception</span>
                  <span class="br0">{</span>
                  <span class="kw1">if</span>
                  <span class="br0">(</span>
                  _client
                  <span class="sy0">!=</span>
                  <span class="kw2">null</span>
                  <span class="br0">)</span>
                  <span class="br0">{</span>
                  _client.
                  <span class="me1">stop</span>
                  <span class="br0">(</span>
                  <span class="br0">)</span>
                  <span class="sy0">;</span>
                  _client
                  <span class="sy0">=</span>
                  <span class="kw2">null</span>
                  <span class="sy0">;</span>
                  <span class="br0">}</span>
                  <span class="br0">}</span>
                  <span class="co3">/**
	 * Make sure the webapp is started before this test is run.
	 * Could be done via the Launch Configuration
	 */</span>
	@Before <span class="kw1">public</span> <span class="kw4">void</span> setup<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		Bundle testBundle <span class="sy0">=</span> FrameworkUtil.<span class="me1">getBundle</span><span class="br0">(</span>ServletTest.<span class="kw1">class</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span>Bundle b <span class="sy0">:</span> testBundle.<span class="me1">getBundleContext</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">getBundles</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">if</span> <span class="br0">(</span>b.<span class="me1">getSymbolicName</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">equals</span><span class="br0">(</span><span class="st0">"org.eclipse.jetty.osgi.boot"</span><span class="br0">)</span>
					<span class="sy0">||</span> b.<span class="me1">getSymbolicName</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">equals</span><span class="br0">(</span><span class="st0">"org.eclipse.jetty.example.webapp"</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="kw1">try</span> <span class="br0">{</span>
					<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"Found "</span> <span class="sy0">+</span> b.<span class="me1">getSymbolicName</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
					b.<span class="me1">start</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
				<span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span>BundleException e<span class="br0">)</span> <span class="br0">{</span>
					<span class="kw1">Assert</span>.<span class="me1">fail</span><span class="br0">(</span><span class="st0">"Unable to start the necessary bundles"</span><span class="br0">)</span><span class="sy0">;</span>
				<span class="br0">}</span>
			<span class="br0">}</span>
		<span class="br0">}</span>
		<span class="co1">//TODO: put in a lifecycle listener</span>
		<span class="kw1">synchronized</span> <span class="br0">(</span><span class="kw3">Thread</span>.<span class="me1">currentThread</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">try</span> <span class="br0">{</span>
				<span class="kw3">Thread</span>.<span class="me1">currentThread</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">wait</span><span class="br0">(</span><span class="nu0">1000</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><span class="kw3">Throwable</span> e<span class="br0">)</span> <span class="br0">{</span>
				e.<span class="me1">printStackTrace</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	@Test <span class="kw1">public</span> <span class="kw4">void</span> testGet<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throws</span> <span class="kw3">Exception</span> <span class="br0">{</span>
		startClient<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		ContentExchange getExchange <span class="sy0">=</span> <span class="kw1">new</span> ContentExchange<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		getExchange.<span class="me1">setURL</span><span class="br0">(</span><span class="st0">"http://localhost:8080/test/"</span><span class="br0">)</span><span class="sy0">;</span>
		getExchange.<span class="me1">setMethod</span><span class="br0">(</span>HttpMethods.<span class="me1">GET</span><span class="br0">)</span><span class="sy0">;</span>
 
		_client.<span class="me1">send</span><span class="br0">(</span>getExchange<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw4">int</span> state <span class="sy0">=</span> getExchange.<span class="me1">waitForDone</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw3">String</span> content <span class="sy0">=</span> <span class="st0">""</span><span class="sy0">;</span>
		<span class="kw4">int</span> responseStatus <span class="sy0">=</span> getExchange.<span class="me1">getResponseStatus</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">if</span> <span class="br0">(</span>responseStatus <span class="sy0">==</span> HttpStatus.<span class="me1">OK_200</span><span class="br0">)</span> <span class="br0">{</span>
			content <span class="sy0">=</span> getExchange.<span class="me1">getResponseContent</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
		<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"Got the content: "</span> <span class="sy0">+</span> content<span class="br0">)</span><span class="sy0">;</span>
		stopClient<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">Assert</span>.<span class="me1">assertEquals</span><span class="br0">(</span>HttpStatus.<span class="me1">OK_200</span>, responseStatus<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">Assert</span>.<span class="me1">assertEquals</span><span class="br0">(</span><span class="st0">"Howdy!"</span>, content<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
<span class="br0">}</span></pre>
              </div>
            </div>
            <p>
              <a class="internal" href="https://wiki.eclipse.org/images/1/19/Org.eclipse.rt.example.webapp-1.0.0.qualifier.zip" title="Org.eclipse.rt.example.webapp-1.0.0.qualifier.zip">Archive of the web-bundle and the webtest bundles</a>
            </p>
            <h2>
              <span class="mw-headline" id="EclipseRT_Jetty_Starter_Kit">EclipseRT Jetty Starter Kit</span>
            </h2>
            <p>EclipseRT Jetty Starter is a downloadable distribution of jetty for production environment.
It is based on p2 and configured out of the box to be managed by p2. For example to upgrade an installation or install other runtime features, one could use the p2 admin UI or the osgi console where p2 defines the provisioning commands.
For development purpose the familiar dropins folder is supported.</p>
            <p>The Starter Kit is bundled with the platform specific equinox launchers. It can be launched directly in java though.
PDE supports importing an eclipse installation as a Target Platform.</p>
            <p>
              It is detailed here:
              <a href="EclipseRT-Jetty-Starter-Kit.html" title="Jetty/Tutorial/EclipseRT-Jetty-Starter-Kit">EclipseRT Jetty Starter Kit</a>
            </p>
            <h2>
              <span class="mw-headline" id="Additional_Resources">Additional Resources</span>
            </h2>
            <p>
              <a href="../Feature/Jetty%20OSGi.html" title="Jetty/Feature/Jetty OSGi">Jetty-OSGi</a>
              ,
              <a href="EclipseRT-Jetty-Starter-Kit.html" title="Jetty/Tutorial/EclipseRT-Jetty-Starter-Kit">EclipseRT Jetty Starter Kit</a>
              , RFC66, PDE
            </p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
