<html>
<head>
    <title>Jetty WTP Plugin</title>
    <link rel="stylesheet" media="screen, print" href="wiki-style.css"/>
</head>
<body>
<div id="mainContent" class="col-md-20">
                      <ul class="nav nav-tabs noprint hidden-print" role="tablist">
                       <li class="active" id="ca-nstab-main"><a href="index.html" title="View the content page [c]" tabindex="-1" accesskey="c">Page</a></li>
                        <li id="ca-talk" class="new"><a href="edit" title="Discussion about the content page [t]" tabindex="-1" accesskey="t">Discussion</a></li>
                        <li id="ca-viewsource"><a title="This page is protected.&#10;You can view its source [e]" tabindex="-1" accesskey="e" href="edit">View source</a></li>
                        <li class="collapsible" id="ca-history"><a href="edit" accesskey="h" title="Past revisions of this page [h]" tabindex="-1">History</a></li>
                      </ul>            <div class="tab-content background-white">
              <div id="tab-pane-main-page-content" class="tab-pane active">

                
                <h1 id="firstHeading" class="firstHeading page-header">
                  <span dir="auto">Jetty/Howto/SetContextPathto /</span>
                </h1>
                <div id="main-page-content">

                  <div id="contentSub" class="alert alert-small alert-warning"><span class="subpages">&lt; <a title="Jetty" href="../../../Jetty.html">Jetty</a>‎ | <a title="Jetty/Howto" href="../../Howto.html">Howto</a></span></div>

                  
                  
                  <div dir="ltr" lang="en" class="mw-content-ltr" id="mw-content-text"><p><span id="1326750294995S" style="display: none;"> </span> 
</p><p><br/>
</p><p><br/>
</p>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="index.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a>
<ul>
<li class="toclevel-2"><a href="index.html#Using_the_WebAppProvider"><span class="tocnumber">1.1</span> <span class="toctext">Using the WebAppProvider</span></a></li>
<li class="toclevel-2"><a href="index.html#Using_the_ContextProvider"><span class="tocnumber">1.2</span> <span class="toctext">Using the ContextProvider</span></a>
<ul>
<li class="toclevel-3"><a href="index.html#Setting_the_Context_Path_with_the_ContextProvider"><span class="tocnumber">1.2.1</span> <span class="toctext">Setting the Context Path with the ContextProvider</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="index.html#Studying_the_Logs"><span class="tocnumber">1.3</span> <span class="toctext">Studying the Logs</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>To set your context path to / (the root context path), you need to use a Context deployment. 
</p>
<div style="background-color: #def3fe; border: 1px solid #c5d7e0; color: black; padding: 5px; margin: 1ex 0; min-height: 35px; padding-left: 45px;" class="messagebox">
<div style="float: left; margin-left: -40px;"><a href="https://wiki.eclipse.org/File:Note.png" class="image"><img alt="Note.png" width="35" height="35" src="../../../images/c/cc/Note.png"/></a></div>
<div><b>Be aware</b><br/>Java Servlet Specification 2.5 discourages an empty context path string, and Java Servlet Specification 3.0 effectively forbids it.</div>
</div>
<p><br/>
In Jetty 7.x, the AppProviders assigned to the DeploymentManager handle context path assignment.
</p><p>By default on the Jetty Distribution, both the WebAppProvider and ContextProvider are enabled. This is important to know because it influences your decision on where to put the <tt>mywebapp.war</tt> file.
</p><p>Examine the <tt>${jetty.home}/start.ini</tt> file, and you'll see that it contains both references to <tt>etc/jetty-webapps.xml</tt> and <tt>etc/jetty-contexts.xml</tt>.
</p>
<h3><span id="Using_the_WebAppProvider" class="mw-headline">Using the WebAppProvider</span></h3>
<p>The WebAppProvider's role is to look in the <tt>${jetty.home}/webapps/</tt> directory for any deployable applications (such as <tt>*.war</tt>), and deploy them onto a context of the same name as the filename. For example, the WebAppProvider deploys <tt>${jetty.home}/webapps/MyApp-2.4.war</tt> into the context <tt>/MyApp-2.4</tt>. There is also the special <i>root.war</i> reserved word that deploys into the context / . While this is the easiest deployment mechanism, it sacrifices control over deployment specifics.
</p>
<h3><span id="Using_the_ContextProvider" class="mw-headline">Using the ContextProvider</span></h3>
<p>The ContextProvider's role is to look in the <tt>${jetty.home}/contexts/</tt> directory for any jetty-xml formatted, deployable contexts. This deployment mechanism gives you the maximum control over the deployment, as this XML file can control anything that is ultimately resolved to a <tt>org.eclipse.jetty.server.handler.ContextHandler</tt> base class, of which WebAppContext (WARs, servlets, etc.) are part. The most common use is to specify a WebAppContext-based XML file, and control things such as what files and directories make up the web application, what temporary directory to use, and even what Context Path to use.
</p>
<h4><span class="mw-headline" id="Setting_the_Context_Path_with_the_ContextProvider">Setting the Context Path with the ContextProvider</span></h4>
<p>To set the context path to / , follow these steps.
</p>
<ol><li>Make sure your ContextProvider-based deployments are enabled in the <tt>start.ini</tt>. That is, make sure that <tt>etc/jetty-context.xml</tt> is present.</li>
<li>Create a <tt>${jetty.home}/contexts/mywebapp.xml</tt> that declares the <tt>&lt;Set name="contextPath"&gt;/&lt;/Set&gt;</tt> option.</li>
<li>If you have the <tt>etc/jetty-webapps.xml</tt> present in your <tt>start.ini</tt>, do not put your <tt>mywebapp.war</tt> in <tt>${jetty.home}/webapps</tt> because doing so causes the WebAppProvider to also deploy the same webapp, and confuses your deployment.</li>
<li>Finally, you can see how the jetty distribution itself does this by examining <tt>${jetty.home}/contexts/test.xml</tt>. Jetty loads the <tt>${jetty.home}/webapps/test.war</tt> via the ContextProvider's use of the <tt>${jetty.home}/contexts/test.xml</tt> into the / context path.</li></ol>
<h3><span id="Studying_the_Logs" class="mw-headline">Studying the Logs</span></h3>
<p>Look at the logs:
</p><p><tt>2012-01-13 13:56:28.779:INFO:oejsh.ContextHandler:started o.e.j.w.WebAppContext{/,file:/tmp/jetty-0.0.0.0-8080-test.war-_-any-/webapp/},/home/joakim/code/jetty/distros/jetty-distribution-7.6.0.RC3/webapps/test.war</tt>
</p><p>That reveals that WebAppContext was
</p>
<ul><li>Started on {/, (the root Context Path)</li>
<li>It was using the temp/work directory file:<tt>/tmp/jetty-0.0.0.0-8080-test.war-_-any-/webapp/</tt></li>
<li>It was using the web application specified in <tt>/home/joakim/code/jetty/distros/jetty-distribution-7.6.0.RC3/webapps/test.war</tt>.</li></ul>


</div>

                    <div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a title="Special:Categories" href="https://wiki.eclipse.org/Special:Categories">Categories</a>: <ul><li><a title="Category:Jetty" href="https://wiki.eclipse.org/Category:Jetty">Jetty</a></li><li><a title="Category:Jetty Howto" href="https://wiki.eclipse.org/Category:Jetty_Howto">Jetty Howto</a></li></ul></div></div>
                                  </div>
              </div>
            </div>
          </div>
</body>
</html>
